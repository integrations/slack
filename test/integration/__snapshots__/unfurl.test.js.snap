// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Integration: unfurls private unfurls a user who does not have their GitHub account connected is gracefully onboarded 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"text\\":\\":white_check_mark: Success! <@U0Other> is now connected to <https://github.com/wilhelmklopp|@wilhelmklopp>\\",\\"mrkdwn_in\\":[\\"text\\"]}]",
  "channel": "C74M",
  "token": "xoxa-token",
  "user": "U0Other",
}
`;

exports[`Integration: unfurls private unfurls a user who does not have their GitHub account connected is gracefully onboarded 2`] = `
Object {
  "channel": "C74M",
  "token": "xoxa-token",
  "ts": "1510704981.000364",
  "unfurls": "{\\"https://github.com/bkeepers/dotenv\\":{\\"color\\":\\"#24292f\\",\\"footer\\":\\":lock: <https://github.com/bkeepers/dotenv|bkeepers/dotenv>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"bkeepers/dotenv\\",\\"title\\":\\"bkeepers/dotenv\\",\\"text\\":\\"A Ruby gem to load environment variables from \`.env\`. \\",\\"fields\\":[{\\"title\\":\\"Stars\\",\\"value\\":4230,\\"short\\":true},{\\"title\\":\\"Language\\",\\"value\\":\\"Ruby\\",\\"short\\":true}],\\"mrkdwn_in\\":[\\"text\\",\\"fields\\"],\\"ts\\":1343101131}}",
}
`;

exports[`Integration: unfurls private unfurls clicking "Dismiss" deletes the prompt and the unfurl record 1`] = `
Object {
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls clicking "Show rich preview" results in unfurl and deletes prompt 1`] = `
Object {
  "channel": "C74M",
  "token": "xoxa-token",
  "ts": "1510704981.000364",
  "unfurls": "{\\"https://github.com/bkeepers/dotenv\\":{\\"color\\":\\"#24292f\\",\\"footer\\":\\":lock: <https://github.com/bkeepers/dotenv|bkeepers/dotenv>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"bkeepers/dotenv\\",\\"title\\":\\"bkeepers/dotenv\\",\\"text\\":\\"A Ruby gem to load environment variables from \`.env\`. \\",\\"fields\\":[{\\"title\\":\\"Stars\\",\\"value\\":4230,\\"short\\":true},{\\"title\\":\\"Language\\",\\"value\\":\\"Ruby\\",\\"short\\":true}],\\"mrkdwn_in\\":[\\"text\\",\\"fields\\"],\\"ts\\":1343101131}}",
}
`;

exports[`Integration: unfurls private unfurls clicking "Show rich preview" results in unfurl and deletes prompt 2`] = `
Object {
  "attachments": Array [
    Object {
      "actions": Array [
        Object {
          "name": "this-channel",
          "style": "primary",
          "text": "Enable for this channel",
          "type": "button",
        },
        Object {
          "name": "all-channels",
          "text": "Enable for all channels",
          "type": "button",
        },
        Object {
          "name": "cancel",
          "text": "Always ask me",
          "type": "button",
        },
      ],
      "callback_id": "unfurl-auto-null|bkeepers/dotenv",
      "color": "#24292f",
      "mrkdwn_in": Array [
        "text",
      ],
      "text": "You can enable automatic previews for *private* links to bkeepers/dotenv that *you* post either to this channel or to all channels in the \`acmecorp\` workspace.",
      "title": "Done! Want to automatically show rich previews for bkeepers/dotenv?",
    },
  ],
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls for users who do not yet have their GitHub account connected connecting their account via an Unfurl prompt of an invalid link results in a not found message 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"text\\":\\":white_check_mark: Success! <@U0Other> is now connected to <https://github.com/wilhelmklopp|@wilhelmklopp>\\",\\"mrkdwn_in\\":[\\"text\\"]}]",
  "channel": "C74M",
  "token": "xoxa-token",
  "user": "U0Other",
}
`;

exports[`Integration: unfurls private unfurls for users who do not yet have their GitHub account connected connecting their account via an Unfurl prompt of an invalid link results in a not found message 2`] = `
Object {
  "attachments": "[{\\"color\\":\\"danger\\",\\"mrkdwn_in\\":[\\"text\\"],\\"text\\":\\"Could not find resource: \`https://github.com/bkeepers/dotenv\`\\"}]",
  "channel": "C74M",
  "response_type": "ephemeral",
  "token": "xoxa-token",
  "user": "U0Other",
}
`;

exports[`Integration: unfurls private unfurls on a workspace that has github.com unfurls disabled, an error message is shown to a user after graceful onboarding 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"text\\":\\":white_check_mark: Success! <@U0Other> is now connected to <https://github.com/wilhelmklopp|@wilhelmklopp>\\",\\"mrkdwn_in\\":[\\"text\\"]}]",
  "channel": "C74M",
  "token": "xoxa-token",
  "user": "U0Other",
}
`;

exports[`Integration: unfurls private unfurls on a workspace that has github.com unfurls disabled, an error message is shown to a user after graceful onboarding 2`] = `
Object {
  "attachments": "[{\\"color\\":\\"danger\\",\\"mrkdwn_in\\":[\\"text\\"],\\"text\\":\\"Could not complete link preview because your workspace has disabled link previews for \`github.com\` <https://get.slack.help/hc/en-us/articles/204399343-Share-links-in-Slack#turn-off-link-previews-for-specific-sites|Read more>\\"}]",
  "channel": "C74M",
  "token": "xoxa-token",
  "user": "U0Other",
}
`;

exports[`Integration: unfurls private unfurls sending prompts works  1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"title\\":\\"Do you want to show a rich preview for https://github.com/bkeepers/dotenv?\\",\\"text\\":\\"The link you shared is from a private repository. Not everyone in this workspace may have access to the associated GitHub content.\\",\\"callback_id\\":\\"unfurl-123\\",\\"actions\\":[{\\"name\\":\\"unfurl\\",\\"text\\":\\"Show rich preview\\",\\"type\\":\\"button\\",\\"style\\":\\"primary\\"},{\\"name\\":\\"unfurl-dismiss\\",\\"text\\":\\"Dismiss\\",\\"type\\":\\"button\\"}]}]",
  "channel": "C0Other",
  "token": "xoxa-token",
  "user": "U88HS",
}
`;

exports[`Integration: unfurls private unfurls sends prompt for private resource that can be unfurled 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"title\\":\\"Do you want to show a rich preview for https://github.com/bkeepers/dotenv?\\",\\"text\\":\\"The link you shared is from a private repository. Not everyone in this workspace may have access to the associated GitHub content.\\",\\"callback_id\\":\\"unfurl-123\\",\\"actions\\":[{\\"name\\":\\"unfurl\\",\\"text\\":\\"Show rich preview\\",\\"type\\":\\"button\\",\\"style\\":\\"primary\\"},{\\"name\\":\\"unfurl-dismiss\\",\\"text\\":\\"Dismiss\\",\\"type\\":\\"button\\"}]}]",
  "channel": "C74M",
  "token": "xoxa-token",
  "user": "U88HS",
}
`;

exports[`Integration: unfurls private unfurls settings User clicks "Dismiss" and gets MutePromptsPrompt When user clicks "Mute prompts for 24h", they get a confirmation message 1`] = `
Object {
  "attachments": Array [
    Object {
      "color": "#24292f",
      "mrkdwn_in": Array [
        "text",
      ],
      "text": "Prompts are muted for 24h :white_check_mark:
You can adjust this setting by invoking \`/github settings\`",
    },
  ],
  "replace_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings User clicks "Dismiss" and gets MutePromptsPrompt When user clicks "Mute prompts indefinitely", they get a confirmation message 1`] = `
Object {
  "attachments": Array [
    Object {
      "color": "#24292f",
      "mrkdwn_in": Array [
        "text",
      ],
      "text": "Prompts are muted indefinitely :white_check_mark:
You can adjust this setting by invoking \`/github settings\`",
    },
  ],
  "replace_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings User clicks "Show rich preview" and gets AutoUnfurlPrompt User clicks "Enable for all channels" subsequent link shared to a different repo results in a new prompt 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"title\\":\\"Do you want to show a rich preview for https://github.com/integrations/test?\\",\\"text\\":\\"The link you shared is from a private repository. Not everyone in this workspace may have access to the associated GitHub content.\\",\\"callback_id\\":\\"unfurl-123\\",\\"actions\\":[{\\"name\\":\\"unfurl\\",\\"text\\":\\"Show rich preview\\",\\"type\\":\\"button\\",\\"style\\":\\"primary\\"},{\\"name\\":\\"unfurl-dismiss\\",\\"text\\":\\"Dismiss\\",\\"type\\":\\"button\\"}]}]",
  "channel": "C74M",
  "token": "xoxa-token",
  "user": "U88HS",
}
`;

exports[`Integration: unfurls private unfurls settings User clicks "Show rich preview" and gets AutoUnfurlPrompt User clicks "Enable for this channel" subsequent link shared in a different channel results in a new prompt 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"title\\":\\"Do you want to show a rich preview for https://github.com/bkeepers/dotenv?\\",\\"text\\":\\"The link you shared is from a private repository. Not everyone in this workspace may have access to the associated GitHub content.\\",\\"callback_id\\":\\"unfurl-123\\",\\"actions\\":[{\\"name\\":\\"unfurl\\",\\"text\\":\\"Show rich preview\\",\\"type\\":\\"button\\",\\"style\\":\\"primary\\"},{\\"name\\":\\"unfurl-dismiss\\",\\"text\\":\\"Dismiss\\",\\"type\\":\\"button\\"}]}]",
  "channel": "C0Other",
  "token": "xoxa-token",
  "user": "U88HS",
}
`;

exports[`Integration: unfurls private unfurls settings User clicks "Show rich preview" and gets AutoUnfurlPrompt User clicks "Enable for this channel" subsequent link shared in the same channel to a different repo results in a new prompt 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"title\\":\\"Do you want to show a rich preview for https://github.com/integrations/test?\\",\\"text\\":\\"The link you shared is from a private repository. Not everyone in this workspace may have access to the associated GitHub content.\\",\\"callback_id\\":\\"unfurl-123\\",\\"actions\\":[{\\"name\\":\\"unfurl\\",\\"text\\":\\"Show rich preview\\",\\"type\\":\\"button\\",\\"style\\":\\"primary\\"},{\\"name\\":\\"unfurl-dismiss\\",\\"text\\":\\"Dismiss\\",\\"type\\":\\"button\\"}]}]",
  "channel": "C74M",
  "token": "xoxa-token",
  "user": "U88HS",
}
`;

exports[`Integration: unfurls private unfurls settings User clicks "Show rich preview" and gets AutoUnfurlPrompt when user clicks "Enable for all channels", they get a confirmation message 1`] = `
Object {
  "attachments": Array [
    Object {
      "color": "#24292f",
      "mrkdwn_in": Array [
        "text",
      ],
      "text": "Links to \`bkeepers/dotenv\` that you post in any channel of this workspace will automatically have a rich preview :white_check_mark:",
    },
  ],
  "replace_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings User clicks "Show rich preview" and gets AutoUnfurlPrompt when user clicks "Enable for this channel", they get a confirmation message 1`] = `
Object {
  "attachments": Array [
    Object {
      "color": "#24292f",
      "mrkdwn_in": Array [
        "text",
      ],
      "text": "Links to \`bkeepers/dotenv\` that you post in this channel will automatically have a rich preview :white_check_mark:",
    },
  ],
  "replace_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings when user clicks "dismiss" 5 times, the MutePromptsPrompt is shown 1`] = `
Object {
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings when user clicks "dismiss" 5 times, the MutePromptsPrompt is shown 2`] = `
Object {
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings when user clicks "dismiss" 5 times, the MutePromptsPrompt is shown 3`] = `
Object {
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings when user clicks "dismiss" 5 times, the MutePromptsPrompt is shown 4`] = `
Object {
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings when user clicks "dismiss" 5 times, the MutePromptsPrompt is shown 5`] = `
Object {
  "attachments": Array [
    Object {
      "actions": Array [
        Object {
          "name": "mute-24h",
          "text": "Mute prompts for 24h",
          "type": "button",
        },
        Object {
          "name": "mute-indefinitely",
          "text": "Mute prompts indefinitely",
          "type": "button",
        },
        Object {
          "name": "cancel",
          "text": "Always ask me",
          "type": "button",
        },
      ],
      "callback_id": "unfurl-mute-prompts",
      "color": "#24292f",
      "title": "Getting too many prompts?",
    },
  ],
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls settings when user clicks "dismiss", no follow up prompt is immediately shown 1`] = `
Object {
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls unfurls resources that cannot be private (such as organisations) without looking up repo privacy 1`] = `
Object {
  "channel": "C74M",
  "token": "xoxa-token",
  "ts": "1510704981.000364",
  "unfurls": "{\\"https://github.com/kubernetes\\":{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/kubernetes|@kubernetes>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"Kubernetes\\",\\"title\\":\\"Kubernetes\\",\\"text\\":\\"Kubernetes\\",\\"thumb_url\\":\\"https://avatars2.githubusercontent.com/u/13629408?v=4\\",\\"fields\\":[{\\"title\\":\\"URL\\",\\"value\\":\\"http://kubernetes.io\\",\\"short\\":true},{\\"title\\":\\"Repositories\\",\\"value\\":51,\\"short\\":true}],\\"ts\\":1438624543}}",
}
`;

exports[`Integration: unfurls private unfurls user sees error message when github.com unfurls are disabled in the workspace 1`] = `
Object {
  "attachments": Array [
    Object {
      "color": "danger",
      "mrkdwn_in": Array [
        "text",
      ],
      "text": "Could not complete link preview because your workspace has disabled link previews for \`github.com\` <https://get.slack.help/hc/en-us/articles/204399343-Share-links-in-Slack#turn-off-link-previews-for-specific-sites|Read more>",
    },
  ],
  "delete_original": true,
}
`;

exports[`Integration: unfurls private unfurls uses user access token for public resources 1`] = `
Object {
  "channel": "C74M",
  "token": "xoxa-token",
  "ts": "1510704981.000364",
  "unfurls": "{\\"https://github.com/bkeepers/dotenv\\":{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/bkeepers/dotenv|bkeepers/dotenv>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"bkeepers/dotenv\\",\\"title\\":\\"bkeepers/dotenv\\",\\"text\\":\\"A Ruby gem to load environment variables from \`.env\`. \\",\\"fields\\":[{\\"title\\":\\"Stars\\",\\"value\\":4230,\\"short\\":true},{\\"title\\":\\"Language\\",\\"value\\":\\"Ruby\\",\\"short\\":true}],\\"mrkdwn_in\\":[\\"text\\",\\"fields\\"],\\"ts\\":1343101131}}",
}
`;

exports[`Integration: unfurls public unfurls does minor unfurl if 2 links are shared 1`] = `
Object {
  "channel": "C74M",
  "token": "xoxa-token",
  "ts": "1510704981.000364",
  "unfurls": "{\\"https://github.com/facebook/react/issues/10191\\":{\\"color\\":\\"#cb2431\\",\\"footer\\":\\"<https://github.com/bkeepers/dotenv|bkeepers/dotenv>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"title\\":\\"#10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[bkeepers/dotenv] #10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\"}}",
}
`;

exports[`Integration: unfurls public unfurls does minor unfurl if 2 links are shared 2`] = `
Object {
  "channel": "C74M",
  "token": "xoxa-token",
  "ts": "1510704981.000364",
  "unfurls": "{\\"https://github.com/atom/atom/issues/16292\\":{\\"color\\":\\"#cb2431\\",\\"footer\\":\\"<https://github.com/bkeepers/dotenv|bkeepers/dotenv>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"title\\":\\"#10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[bkeepers/dotenv] #10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\"}}",
}
`;

exports[`Integration: unfurls public unfurls issue 1`] = `
Object {
  "channel": "C74M",
  "token": "xoxa-token",
  "ts": "1510704981.000364",
  "unfurls": "{\\"https://github.com/bkeepers/dotenv\\":{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/bkeepers/dotenv|bkeepers/dotenv>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"bkeepers/dotenv\\",\\"title\\":\\"bkeepers/dotenv\\",\\"text\\":\\"A Ruby gem to load environment variables from \`.env\`. \\",\\"fields\\":[{\\"title\\":\\"Stars\\",\\"value\\":4230,\\"short\\":true},{\\"title\\":\\"Language\\",\\"value\\":\\"Ruby\\",\\"short\\":true}],\\"mrkdwn_in\\":[\\"text\\",\\"fields\\"],\\"ts\\":1343101131}}",
}
`;

exports[`Integration: unfurls public unfurls only unfurls link first time a link is shared 1`] = `
Object {
  "channel": "C74M",
  "token": "xoxa-token",
  "ts": "1510704981.000364",
  "unfurls": "{\\"https://github.com/bkeepers/dotenv\\":{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/bkeepers/dotenv|bkeepers/dotenv>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"bkeepers/dotenv\\",\\"title\\":\\"bkeepers/dotenv\\",\\"text\\":\\"A Ruby gem to load environment variables from \`.env\`. \\",\\"fields\\":[{\\"title\\":\\"Stars\\",\\"value\\":4230,\\"short\\":true},{\\"title\\":\\"Language\\",\\"value\\":\\"Ruby\\",\\"short\\":true}],\\"mrkdwn_in\\":[\\"text\\",\\"fields\\"],\\"ts\\":1343101131}}",
}
`;
