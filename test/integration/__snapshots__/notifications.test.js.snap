// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Integration: notifications to a subscribed channel channel_not_found error from slack deletes subscription 1`] = `
Array [
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel channel_not_found error from slack deletes subscription 2`] = `
Array [
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel comments are updated when edited 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack/test|github-slack/test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"[github-slack/test] Comment on #23\\",\\"title\\":\\"Comment on #23 testing multi-tenet\\",\\"title_link\\":\\"https://github.com/github-slack/test/issues/23#issuecomment-364284529\\",\\"author_name\\":\\"bkeepers\\",\\"author_link\\":\\"https://github.com/bkeepers\\",\\"author_icon\\":\\"https://avatars0.githubusercontent.com/u/173?v=4\\",\\"ts\\":1518132652,\\"mrkdwn_in\\":[\\"text\\"],\\"text\\":\\"edited html\\"}]",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel comments are updated when edited 2`] = `
Array [
  "channel#9523#C002:comment#MDEyOklzc3VlQ29tbWVudDM2NDI4NDUyOQ==",
  "creator-access#1:100403908",
]
`;

exports[`Integration: notifications to a subscribed channel comments are updated when edited 3`] = `
Array [
  Array [
    "channel#9523#C002:comment#MDEyOklzc3VlQ29tbWVudDM2NDI4NDUyOQ==",
    Object {
      "channel": undefined,
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100403908",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel delivers force push with no commits 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"author_name\\":\\"wilhelmklopp\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/7718702?v=4\\",\\"author_link\\":\\"https://github.com/wilhelmklopp\\",\\"fallback\\":\\"[github-slack/app] force-pushed the <https://github.com/github-slack/app/tree/master|\`master\`> branch from \`9e70dd34\` to \`c8517a6a\`\\",\\"text\\":\\"*force-pushed the <https://github.com/github-slack/app/tree/master|\`master\`> branch from \`9e70dd34\` to \`c8517a6a\`*\\\\n\\",\\"mrkdwn_in\\":[\\"text\\"]}]",
  "channel": "C002",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel delivers force push with no commits 2`] = `
Array [
  "creator-access#1:100427737",
]
`;

exports[`Integration: notifications to a subscribed channel delivers force push with no commits 3`] = `
Array [
  Array [
    "creator-access#1:100427737",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel delivers pull request review commments if comments are enabled 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack-test-org/test2|github-slack-test-org/test2>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"[github-slack-test-org/test2] Comment on #1\\",\\"title\\":\\"Comment on #1 Update README.md\\",\\"title_link\\":\\"https://github.com/github-slack-test-org/test2/pull/1#discussion_r171608320\\",\\"author_name\\":\\"wilhelmklopp\\",\\"author_link\\":\\"https://github.com/wilhelmklopp\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/7718702?v=4\\",\\"ts\\":1519920573,\\"mrkdwn_in\\":[\\"text\\"],\\"text\\":\\"rendered html\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel delivers pull request review commments if comments are enabled 2`] = `
Array [
  "channel#9523#C001:comment#MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTYwODMyMA==",
  "creator-access#1:123302024",
]
`;

exports[`Integration: notifications to a subscribed channel delivers pull request review commments if comments are enabled 3`] = `
Array [
  Array [
    "channel#9523#C001:comment#MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MTYwODMyMA==",
    Object {
      "channel": undefined,
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:123302024",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel delivers pushes on non default branch if enabled 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack/public-test|github-slack/public-test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"author_name\\":\\"wilhelmklopp\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/7718702?v=4\\",\\"author_link\\":\\"https://github.com/wilhelmklopp\\",\\"fallback\\":\\"[github-slack/public-test] <https://github.com/github-slack/public-test/commit/659d4e6bec67|1 new commit> pushed to <https://github.com/github-slack/public-test/tree/test|\`test\`>\\",\\"text\\":\\"*<https://github.com/github-slack/public-test/commit/659d4e6bec67|1 new commit> pushed to <https://github.com/github-slack/public-test/tree/test|\`test\`>*\\\\n<https://github.com/github-slack/public-test/commit/659d4e6bec67dcdadcd123eb5882bb8e48ccc4a4|\`659d4e6b\`> - new commit\\",\\"mrkdwn_in\\":[\\"text\\"]}]",
  "channel": "C002",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel delivers pushes on non default branch if enabled 2`] = `
Array [
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel delivers pushes on non default branch if enabled 3`] = `
Array [
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel delivers release notes by default 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"title\\":\\"Release - vX.Y.Z - Canary Dwarf\\",\\"fallback\\":\\"[github-slack/app] Release - vX.Y.Z - Canary Dwarf\\",\\"title_link\\":\\"https://github.com/github-slack/app/releases/tag/vX.Y.Z\\",\\"author_name\\":\\"wilhelmklopp\\",\\"author_link\\":\\"https://github.com/wilhelmklopp\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/7718702?v=4\\",\\"ts\\":1523863209,\\"mrkdwn_in\\":[\\"text\\"],\\"text\\":\\"*Features*\\\\n\\\\n• Feature 1  \\\\n    ...\\\\n\\\\n*Fixes*\\\\n\\\\n• Fix 1  \\\\n    ...\\\\n\\\\n*Internals*\\\\n\\\\n• Internal improvement 1  \\\\n    ...\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel delivers release notes by default 2`] = `
Array [
  "creator-access#1:100427737",
]
`;

exports[`Integration: notifications to a subscribed channel delivers release notes by default 3`] = `
Array [
  Array [
    "creator-access#1:100427737",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel deployment_status event 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#dbab09\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"author_name\\":\\"wilhelmklopp\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/7718702?v=4\\",\\"author_link\\":\\"https://github.com/wilhelmklopp\\",\\"fallback\\":\\"[github-slack/app] Deploying 3dce5c8 to github-slack-app\\",\\"text\\":\\"Deploying <https://github.com/github-slack/app/commit/3dce5c8488afc87a1ffbb840fc33b4a8331a1034|\`3dce5c8\`> to <https://dashboard.heroku.com/apps/github-slack-app|github-slack-app>\\",\\"mrkdwn_in\\":[\\"text\\"]}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel deployment_status event 2`] = `
Object {
  "attachments": "[{\\"color\\":\\"#28a745\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"author_name\\":\\"wilhelmklopp\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/7718702?v=4\\",\\"author_link\\":\\"https://github.com/wilhelmklopp\\",\\"fallback\\":\\"[github-slack/app] Successfully deployed 3dce5c8 to github-slack-app\\",\\"text\\":\\"Successfully deployed <https://github.com/github-slack/app/commit/3dce5c8488afc87a1ffbb840fc33b4a8331a1034|\`3dce5c8\`> to <https://dashboard.heroku.com/apps/github-slack-app/activity/builds/056df7bf-83c4-4ac1-911b-c8642413eef0|github-slack-app>\\",\\"mrkdwn_in\\":[\\"text\\"]}]",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel deployment_status event 3`] = `
Array [
  "channel#9523#C001:deployment#57919058",
  "creator-access#1:100427737",
]
`;

exports[`Integration: notifications to a subscribed channel deployment_status event 4`] = `
Array [
  Array [
    "channel#9523#C001:deployment#57919058",
    Object {
      "channel": undefined,
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100427737",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel do not post prompt to re-subscribe after user loses access to repo but the subscription is to an account 1`] = `
Array [
  "creator-access#1:100427737",
  "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
]
`;

exports[`Integration: notifications to a subscribed channel do not post prompt to re-subscribe after user loses access to repo but the subscription is to an account 2`] = `
Array [
  Array [
    "creator-access#1:100427737",
    false,
  ],
  Array [
    "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
    142600109,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel does not deliver empty reviews which are actually review comments 1`] = `
Array [
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel does not deliver empty reviews which are actually review comments 2`] = `
Array [
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel does not deliver push with no commits 1`] = `
Array [
  "creator-access#1:100427737",
]
`;

exports[`Integration: notifications to a subscribed channel does not deliver push with no commits 2`] = `
Array [
  Array [
    "creator-access#1:100427737",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel does not deliver pushes on non-default branch if not explicitly enabled 1`] = `
Array [
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel does not deliver pushes on non-default branch if not explicitly enabled 2`] = `
Array [
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel issue opened 1`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":126,\\"short\\":true}],\\"color\\":\\"#cb2431\\",\\"footer\\":\\"<https://github.com/github-slack/public-test|github-slack/public-test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"wohali\\",\\"author_link\\":\\"https://github.com/wohali\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/u/112292?v=4\\",\\"title\\":\\"#10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[github-slack/public-test] Issue opened by wilhelmklopp\\",\\"text\\":\\"Hi there,\\\\r\\\\n\\\\r\\\\nThe Apache Software Foundation Legal Affairs Committee [has announced][1] that the so-called 'Facebook BSD+Patents License' is no longer allowed to be used as a direct dependency in Apache projects.\\\\r\\\\n\\\\r\\\\nThis has lead to a lot of upset and frustration in the Apache community, especially from projects requiring similarly-licensed code as direct dependencies - the chief of these being RocksDB.\\\\r\\\\n\\\\r\\\\nHowever, we (the Apache Software Foundation) have just received word that [RocksDB will be re-licensing their code under the dual Apache License v2.0 and GPL 2 licenses][2]. \\\\r\\\\n\\\\r\\\\nAs a user of React.JS in an ASF top-level project (Apache CouchDB), please consider re-licensing React.JS under similar terms. Otherwise, many ASF projects such as our own will have to stop relying on and building with React.\\\\r\\\\n\\\\r\\\\nA previous bug (#9760) suggested I mention @lacker in this issue when asking licensing questions, so I'm doing so.\\\\r\\\\n\\\\r\\\\nThank you kindly for your consideration.\\\\r\\\\n\\\\r\\\\n[1]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088663&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088663\\\\r\\\\n[2]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088730&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088730\\",\\"pretext\\":\\"Issue opened by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel issue opened 2`] = `
Array [
  "channel#9523#C001:issue#265831302",
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel issue opened 3`] = `
Array [
  Array [
    "channel#9523#C001:issue#265831302",
    Object {
      "channel": undefined,
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel issues closed does not make an API call to issues endpoint 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#36a64f\\",\\"footer\\":\\"<https://github.com/github-slack/public-test|github-slack/public-test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1508171038,\\"mrkdwn_in\\":[\\"text\\"],\\"title\\":\\"#1 Needs content\\",\\"title_link\\":\\"https://github.com/github-slack/public-test/issues/1\\",\\"fallback\\":\\"[github-slack/public-test] Issue closed by wilhelmklopp\\",\\"pretext\\":\\"Issue closed by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel issues closed does not make an API call to issues endpoint 2`] = `
Array [
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel issues closed does not make an API call to issues endpoint 3`] = `
Array [
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel issues reopened does not make an API call to issues endpoint 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#36a64f\\",\\"footer\\":\\"<https://github.com/github-slack/public-test|github-slack/public-test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1508171038,\\"mrkdwn_in\\":[\\"text\\"],\\"title\\":\\"#1 Needs content\\",\\"title_link\\":\\"https://github.com/github-slack/public-test/issues/1\\",\\"fallback\\":\\"[github-slack/public-test] Issue reopened by wilhelmklopp\\",\\"pretext\\":\\"Issue reopened by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel issues reopened does not make an API call to issues endpoint 2`] = `
Array [
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel issues reopened does not make an API call to issues endpoint 3`] = `
Array [
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel issues.edited updates issue message 1`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":126,\\"short\\":true}],\\"color\\":\\"#cb2431\\",\\"footer\\":\\"<https://github.com/github-slack/public-test|github-slack/public-test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"wohali\\",\\"author_link\\":\\"https://github.com/wohali\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/u/112292?v=4\\",\\"title\\":\\"#10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[github-slack/public-test] Issue opened by wohali\\",\\"text\\":\\"Hi there,\\\\r\\\\n\\\\r\\\\nThe Apache Software Foundation Legal Affairs Committee [has announced][1] that the so-called 'Facebook BSD+Patents License' is no longer allowed to be used as a direct dependency in Apache projects.\\\\r\\\\n\\\\r\\\\nThis has lead to a lot of upset and frustration in the Apache community, especially from projects requiring similarly-licensed code as direct dependencies - the chief of these being RocksDB.\\\\r\\\\n\\\\r\\\\nHowever, we (the Apache Software Foundation) have just received word that [RocksDB will be re-licensing their code under the dual Apache License v2.0 and GPL 2 licenses][2]. \\\\r\\\\n\\\\r\\\\nAs a user of React.JS in an ASF top-level project (Apache CouchDB), please consider re-licensing React.JS under similar terms. Otherwise, many ASF projects such as our own will have to stop relying on and building with React.\\\\r\\\\n\\\\r\\\\nA previous bug (#9760) suggested I mention @lacker in this issue when asking licensing questions, so I'm doing so.\\\\r\\\\n\\\\r\\\\nThank you kindly for your consideration.\\\\r\\\\n\\\\r\\\\n[1]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088663&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088663\\\\r\\\\n[2]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088730&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088730\\",\\"pretext\\":\\"Issue opened by wohali\\"}]",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel issues.edited updates issue message 2`] = `
Array [
  "channel#9523#C001:issue#265831302",
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel issues.edited updates issue message 3`] = `
Array [
  Array [
    "channel#9523#C001:issue#265831302",
    Object {
      "channel": undefined,
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel message still gets delivered if no creatorId is set on Subscription 1`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":3,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1502411430,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"e-beach\\",\\"author_link\\":\\"https://github.com/e-beach\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/13651458?v=4\\",\\"title\\":\\"#1535 Make fork command idempotent\\",\\"title_link\\":\\"https://github.com/github/hub/pull/1535\\",\\"fallback\\":\\"[github-slack/app] #1535 Make fork command idempotent\\",\\"text\\":\\"Fixes #1499.\\\\r\\\\n\\\\r\\\\nThis PR makes \`hub fork\` succeed, with no operation, if a remote pointing to the forked repository already exists.\\\\r\\\\n \\",\\"pretext\\":\\"Pull request merged by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel message still gets delivered if no creatorId is set on Subscription 2`] = `
Array [
  "channel#9523#C001:pull#142600109",
  "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
]
`;

exports[`Integration: notifications to a subscribed channel message still gets delivered if no creatorId is set on Subscription 3`] = `
Array [
  Array [
    "channel#9523#C001:pull#142600109",
    Object {
      "channel": undefined,
      "context": Object {
        "number": 31,
        "owner": "github-slack",
        "repo": "app",
      },
      "ts": undefined,
    },
  ],
  Array [
    "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
    142600109,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel other error from slack does not delete subscription 1`] = `
Array [
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel other error from slack does not delete subscription 2`] = `
Array [
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel post prompt to re-subscribe after user loses access to repo 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"mrkdwn_in\\":[\\"text\\"],\\"text\\":\\"Subscription to \`github-slack/app\` has been disabled, because <@U012345>, who originally set it up, no longer has access.\\\\nRun \`/github subscribe github-slack/app\` to re-enable the subscription.\\"}]",
  "channel": "C001",
  "response_type": "in_channel",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel post prompt to re-subscribe after user loses access to repo 2`] = `
Array [
  "creator-access#1:100427737",
  "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
]
`;

exports[`Integration: notifications to a subscribed channel post prompt to re-subscribe after user loses access to repo 3`] = `
Array [
  Array [
    "creator-access#1:100427737",
    false,
  ],
  Array [
    "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
    142600109,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel public event 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack/private-turned-public|github-slack/private-turned-public>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"author_name\\":\\"wilhelmklopp\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/7718702?v=4\\",\\"author_link\\":\\"https://github.com/wilhelmklopp\\",\\"text\\":\\"github-slack/private-turned-public is now public!\\",\\"fallback\\":\\"github-slack/private-turned-public is now public!\\",\\"image_url\\":\\"https://octodex.github.com/images/welcometocat.png\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel public event 2`] = `
Array [
  "creator-access#1:115726862",
]
`;

exports[`Integration: notifications to a subscribed channel public event 3`] = `
Array [
  Array [
    "creator-access#1:115726862",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel pull request closed does not make an API call to issues endpoint 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#36a64f\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1506092298,\\"mrkdwn_in\\":[\\"text\\"],\\"title\\":\\"#31 Add badges to readme\\",\\"title_link\\":\\"https://github.com/github-slack/app/pull/31\\",\\"fallback\\":\\"[github-slack/app] #31 Add badges to readme\\",\\"pretext\\":\\"Pull request closed by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request closed does not make an API call to issues endpoint 2`] = `
Array [
  "creator-access#1:100427737",
]
`;

exports[`Integration: notifications to a subscribed channel pull request closed does not make an API call to issues endpoint 3`] = `
Array [
  Array [
    "creator-access#1:100427737",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel pull request opened 1`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":126,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"wohali\\",\\"author_link\\":\\"https://github.com/wohali\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/u/112292?v=4\\",\\"title\\":\\"#10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[github-slack/app] #10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"text\\":\\"Hi there,\\\\r\\\\n\\\\r\\\\nThe Apache Software Foundation Legal Affairs Committee [has announced][1] that the so-called 'Facebook BSD+Patents License' is no longer allowed to be used as a direct dependency in Apache projects.\\\\r\\\\n\\\\r\\\\nThis has lead to a lot of upset and frustration in the Apache community, especially from projects requiring similarly-licensed code as direct dependencies - the chief of these being RocksDB.\\\\r\\\\n\\\\r\\\\nHowever, we (the Apache Software Foundation) have just received word that [RocksDB will be re-licensing their code under the dual Apache License v2.0 and GPL 2 licenses][2]. \\\\r\\\\n\\\\r\\\\nAs a user of React.JS in an ASF top-level project (Apache CouchDB), please consider re-licensing React.JS under similar terms. Otherwise, many ASF projects such as our own will have to stop relying on and building with React.\\\\r\\\\n\\\\r\\\\nA previous bug (#9760) suggested I mention @lacker in this issue when asking licensing questions, so I'm doing so.\\\\r\\\\n\\\\r\\\\nThank you kindly for your consideration.\\\\r\\\\n\\\\r\\\\n[1]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088663&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088663\\\\r\\\\n[2]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088730&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088730\\",\\"pretext\\":\\"Pull request merged by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request opened 2`] = `
Array [
  "channel#9523#C001:pull#142600109",
  "creator-access#1:100427737",
  "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
]
`;

exports[`Integration: notifications to a subscribed channel pull request opened 3`] = `
Array [
  Array [
    "channel#9523#C001:pull#142600109",
    Object {
      "channel": undefined,
      "context": Object {
        "number": 31,
        "owner": "github-slack",
        "repo": "app",
      },
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100427737",
    true,
  ],
  Array [
    "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
    142600109,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by checks and no statuses 1`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":126,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"wohali\\",\\"author_link\\":\\"https://github.com/wohali\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/u/112292?v=4\\",\\"title\\":\\"#31 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[github-slack/app] #31 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"text\\":\\"Hi there,\\\\r\\\\n\\\\r\\\\nThe Apache Software Foundation Legal Affairs Committee [has announced][1] that the so-called 'Facebook BSD+Patents License' is no longer allowed to be used as a direct dependency in Apache projects.\\\\r\\\\n\\\\r\\\\nThis has lead to a lot of upset and frustration in the Apache community, especially from projects requiring similarly-licensed code as direct dependencies - the chief of these being RocksDB.\\\\r\\\\n\\\\r\\\\nHowever, we (the Apache Software Foundation) have just received word that [RocksDB will be re-licensing their code under the dual Apache License v2.0 and GPL 2 licenses][2]. \\\\r\\\\n\\\\r\\\\nAs a user of React.JS in an ASF top-level project (Apache CouchDB), please consider re-licensing React.JS under similar terms. Otherwise, many ASF projects such as our own will have to stop relying on and building with React.\\\\r\\\\n\\\\r\\\\nA previous bug (#9760) suggested I mention @lacker in this issue when asking licensing questions, so I'm doing so.\\\\r\\\\n\\\\r\\\\nThank you kindly for your consideration.\\\\r\\\\n\\\\r\\\\n[1]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088663&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088663\\\\r\\\\n[2]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088730&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088730\\",\\"pretext\\":\\"Pull request merged by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by checks and no statuses 2`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":3,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github/hub|github/hub>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1502411430,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"e-beach\\",\\"author_link\\":\\"https://github.com/e-beach\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/13651458?v=4\\",\\"title\\":\\"#1535 Make fork command idempotent\\",\\"title_link\\":\\"https://github.com/github/hub/pull/1535\\",\\"fallback\\":\\"[github/hub] #1535 Make fork command idempotent\\",\\"text\\":\\"Fixes #1499.\\\\r\\\\n\\\\r\\\\nThis PR makes \`hub fork\` succeed, with no operation, if a remote pointing to the forked repository already exists.\\\\r\\\\n \\",\\"pretext\\":\\"Pull request merged by e-beach\\"},{\\"fallback\\":\\"Super CI: Mighty Readme report\\",\\"author_name\\":\\"Super CI: Mighty Readme report\\",\\"author_icon\\":\\"https://github.com/images/error/octocat_happy.gif\\",\\"author_link\\":\\"http://github.com/github/hello-world/runs/4\\",\\"color\\":\\"#dbab09\\",\\"mrkdwn_in\\":[\\"text\\"]},{\\"color\\":\\"#dbab09\\",\\"fallback\\":\\"2 other checks have passed\\",\\"text\\":\\":white_check_mark: 2 other checks have passed\\",\\"footer\\":\\"2/3 successful checks\\"}]",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by checks and no statuses 3`] = `
Array [
  "channel#9523#C001:pull#142600109",
  "creator-access#1:100427737",
  "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
]
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by checks and no statuses 4`] = `
Array [
  Array [
    "channel#9523#C001:pull#142600109",
    Object {
      "channel": undefined,
      "context": Object {
        "number": 31,
        "owner": "github-slack",
        "repo": "app",
      },
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100427737",
    true,
  ],
  Array [
    "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
    142600109,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by statuses and checks 1`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":126,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"wohali\\",\\"author_link\\":\\"https://github.com/wohali\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/u/112292?v=4\\",\\"title\\":\\"#31 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[github-slack/app] #31 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"text\\":\\"Hi there,\\\\r\\\\n\\\\r\\\\nThe Apache Software Foundation Legal Affairs Committee [has announced][1] that the so-called 'Facebook BSD+Patents License' is no longer allowed to be used as a direct dependency in Apache projects.\\\\r\\\\n\\\\r\\\\nThis has lead to a lot of upset and frustration in the Apache community, especially from projects requiring similarly-licensed code as direct dependencies - the chief of these being RocksDB.\\\\r\\\\n\\\\r\\\\nHowever, we (the Apache Software Foundation) have just received word that [RocksDB will be re-licensing their code under the dual Apache License v2.0 and GPL 2 licenses][2]. \\\\r\\\\n\\\\r\\\\nAs a user of React.JS in an ASF top-level project (Apache CouchDB), please consider re-licensing React.JS under similar terms. Otherwise, many ASF projects such as our own will have to stop relying on and building with React.\\\\r\\\\n\\\\r\\\\nA previous bug (#9760) suggested I mention @lacker in this issue when asking licensing questions, so I'm doing so.\\\\r\\\\n\\\\r\\\\nThank you kindly for your consideration.\\\\r\\\\n\\\\r\\\\n[1]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088663&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088663\\\\r\\\\n[2]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088730&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088730\\",\\"pretext\\":\\"Pull request merged by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by statuses and checks 2`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":3,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github/hub|github/hub>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1502411430,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"e-beach\\",\\"author_link\\":\\"https://github.com/e-beach\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/13651458?v=4\\",\\"title\\":\\"#1535 Make fork command idempotent\\",\\"title_link\\":\\"https://github.com/github/hub/pull/1535\\",\\"fallback\\":\\"[github/hub] #1535 Make fork command idempotent\\",\\"text\\":\\"Fixes #1499.\\\\r\\\\n\\\\r\\\\nThis PR makes \`hub fork\` succeed, with no operation, if a remote pointing to the forked repository already exists.\\\\r\\\\n \\",\\"pretext\\":\\"Pull request merged by e-beach\\"},{\\"fallback\\":\\"codecov/patch: Coverage not affected when comparing 0143c3c...68c2ef0\\",\\"author_name\\":\\"codecov/patch: Coverage not affected when comparing 0143c3c...68c2ef0\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/in/254?v=4\\",\\"author_link\\":\\"https://codecov.io/gh/github-slack/app/compare/0143c3cd70052e00bb07dc09229b261b3afd807d...68c2ef08b77a144aeaa69b601ecbacb979e3a8fd\\",\\"color\\":\\"#cb2431\\",\\"mrkdwn_in\\":[\\"text\\"]},{\\"fallback\\":\\"codecov/project: 98.37% remains the same compared to 0143c3c\\",\\"author_name\\":\\"codecov/project: 98.37% remains the same compared to 0143c3c\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/in/254?v=4\\",\\"author_link\\":\\"https://codecov.io/gh/github-slack/app/compare/0143c3cd70052e00bb07dc09229b261b3afd807d...68c2ef08b77a144aeaa69b601ecbacb979e3a8fd\\",\\"color\\":\\"#dbab09\\",\\"mrkdwn_in\\":[\\"text\\"]},{\\"fallback\\":\\"Super CI: Mighty Readme report\\",\\"author_name\\":\\"Super CI: Mighty Readme report\\",\\"author_icon\\":\\"https://github.com/images/error/octocat_happy.gif\\",\\"author_link\\":\\"http://github.com/github/hello-world/runs/4\\",\\"color\\":\\"#dbab09\\",\\"mrkdwn_in\\":[\\"text\\"]},{\\"color\\":\\"#dbab09\\",\\"fallback\\":\\"4 other checks have passed\\",\\"text\\":\\":white_check_mark: 4 other checks have passed\\",\\"footer\\":\\"4/7 successful checks\\"}]",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by statuses and checks 3`] = `
Array [
  "channel#9523#C001:pull#142600109",
  "creator-access#1:100427737",
  "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
]
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by statuses and checks 4`] = `
Array [
  Array [
    "channel#9523#C001:pull#142600109",
    Object {
      "channel": undefined,
      "context": Object {
        "number": 31,
        "owner": "github-slack",
        "repo": "app",
      },
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100427737",
    true,
  ],
  Array [
    "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
    142600109,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by statuses and no checks 1`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":126,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"wohali\\",\\"author_link\\":\\"https://github.com/wohali\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/u/112292?v=4\\",\\"title\\":\\"#31 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[github-slack/app] #31 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"text\\":\\"Hi there,\\\\r\\\\n\\\\r\\\\nThe Apache Software Foundation Legal Affairs Committee [has announced][1] that the so-called 'Facebook BSD+Patents License' is no longer allowed to be used as a direct dependency in Apache projects.\\\\r\\\\n\\\\r\\\\nThis has lead to a lot of upset and frustration in the Apache community, especially from projects requiring similarly-licensed code as direct dependencies - the chief of these being RocksDB.\\\\r\\\\n\\\\r\\\\nHowever, we (the Apache Software Foundation) have just received word that [RocksDB will be re-licensing their code under the dual Apache License v2.0 and GPL 2 licenses][2]. \\\\r\\\\n\\\\r\\\\nAs a user of React.JS in an ASF top-level project (Apache CouchDB), please consider re-licensing React.JS under similar terms. Otherwise, many ASF projects such as our own will have to stop relying on and building with React.\\\\r\\\\n\\\\r\\\\nA previous bug (#9760) suggested I mention @lacker in this issue when asking licensing questions, so I'm doing so.\\\\r\\\\n\\\\r\\\\nThank you kindly for your consideration.\\\\r\\\\n\\\\r\\\\n[1]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088663&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088663\\\\r\\\\n[2]: https://issues.apache.org/jira/browse/LEGAL-303?focusedCommentId=16088730&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16088730\\",\\"pretext\\":\\"Pull request merged by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by statuses and no checks 2`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":3,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github/hub|github/hub>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1502411430,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"e-beach\\",\\"author_link\\":\\"https://github.com/e-beach\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/13651458?v=4\\",\\"title\\":\\"#1535 Make fork command idempotent\\",\\"title_link\\":\\"https://github.com/github/hub/pull/1535\\",\\"fallback\\":\\"[github/hub] #1535 Make fork command idempotent\\",\\"text\\":\\"Fixes #1499.\\\\r\\\\n\\\\r\\\\nThis PR makes \`hub fork\` succeed, with no operation, if a remote pointing to the forked repository already exists.\\\\r\\\\n \\",\\"pretext\\":\\"Pull request merged by e-beach\\"},{\\"fallback\\":\\"codecov/patch: Coverage not affected when comparing 0143c3c...68c2ef0\\",\\"author_name\\":\\"codecov/patch: Coverage not affected when comparing 0143c3c...68c2ef0\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/in/254?v=4\\",\\"author_link\\":\\"https://codecov.io/gh/github-slack/app/compare/0143c3cd70052e00bb07dc09229b261b3afd807d...68c2ef08b77a144aeaa69b601ecbacb979e3a8fd\\",\\"color\\":\\"#cb2431\\",\\"mrkdwn_in\\":[\\"text\\"]},{\\"fallback\\":\\"codecov/project: 98.37% remains the same compared to 0143c3c\\",\\"author_name\\":\\"codecov/project: 98.37% remains the same compared to 0143c3c\\",\\"author_icon\\":\\"https://avatars2.githubusercontent.com/in/254?v=4\\",\\"author_link\\":\\"https://codecov.io/gh/github-slack/app/compare/0143c3cd70052e00bb07dc09229b261b3afd807d...68c2ef08b77a144aeaa69b601ecbacb979e3a8fd\\",\\"color\\":\\"#dbab09\\",\\"mrkdwn_in\\":[\\"text\\"]},{\\"color\\":\\"#dbab09\\",\\"fallback\\":\\"2 other checks have passed\\",\\"text\\":\\":white_check_mark: 2 other checks have passed\\",\\"footer\\":\\"2/4 successful checks\\"}]",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by statuses and no checks 3`] = `
Array [
  "channel#9523#C001:pull#142600109",
  "creator-access#1:100427737",
  "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
]
`;

exports[`Integration: notifications to a subscribed channel pull request opened followed by statuses and no checks 4`] = `
Array [
  Array [
    "channel#9523#C001:pull#142600109",
    Object {
      "channel": undefined,
      "context": Object {
        "number": 31,
        "owner": "github-slack",
        "repo": "app",
      },
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100427737",
    true,
  ],
  Array [
    "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
    142600109,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel pull request ready_for_review 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#cb2431\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1500156238,\\"mrkdwn_in\\":[\\"text\\"],\\"title\\":\\"#10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"title_link\\":\\"https://github.com/facebook/react/issues/10191\\",\\"fallback\\":\\"[github-slack/app] #10191 Consider re-licensing to AL v2.0, as RocksDB has just done\\",\\"pretext\\":\\"Pull request ready for review by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request ready_for_review 2`] = `
Array [
  "channel#9523#C001:pull#142600109",
  "creator-access#1:100427737",
]
`;

exports[`Integration: notifications to a subscribed channel pull request ready_for_review 3`] = `
Array [
  Array [
    "channel#9523#C001:pull#142600109",
    Object {
      "channel": undefined,
      "context": Object {
        "number": 31,
        "owner": "github-slack",
        "repo": "app",
      },
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100427737",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel pull request reopened does not make an API call to issues endpoint 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#36a64f\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1506092298,\\"mrkdwn_in\\":[\\"text\\"],\\"title\\":\\"#31 Add badges to readme\\",\\"title_link\\":\\"https://github.com/github-slack/app/pull/31\\",\\"fallback\\":\\"[github-slack/app] #31 Add badges to readme\\",\\"pretext\\":\\"Pull request reopened by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel pull request reopened does not make an API call to issues endpoint 2`] = `
Array [
  "creator-access#1:100427737",
]
`;

exports[`Integration: notifications to a subscribed channel pull request reopened does not make an API call to issues endpoint 3`] = `
Array [
  Array [
    "creator-access#1:100427737",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel ref event 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack/public-test|github-slack/public-test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"author_name\\":\\"wilhelmklopp\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/7718702?v=4\\",\\"author_link\\":\\"https://github.com/wilhelmklopp\\",\\"fallback\\":\\"[github-slack/public-test] Deleted branch <https://github.com/github-slack/public-test/tree/hello|\`hello\`>\\",\\"text\\":\\"Deleted branch <https://github.com/github-slack/public-test/tree/hello|\`hello\`>\\",\\"mrkdwn_in\\":[\\"text\\"]}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel ref event 2`] = `
Array [
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel ref event 3`] = `
Array [
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel repository.deleted posts to channel and deletes repository subcription 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack-test-org/i-will-be-deleted|github-slack-test-org/i-will-be-deleted>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"[github-slack-test-org/i-will-be-deleted] Repository deleted by wilhelmklopp\\",\\"title\\":\\"github-slack-test-org/i-will-be-deleted\\",\\"fields\\":[{\\"title\\":\\"Last updated\\",\\"value\\":\\"2 months ago\\",\\"short\\":true}],\\"mrkdwn_in\\":[\\"text\\",\\"fields\\"],\\"ts\\":1520343804,\\"pretext\\":\\"Repository deleted by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel review event 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#36a64f\\",\\"footer\\":\\"<https://github.com/github-slack/public-test|github-slack/public-test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"author_name\\":\\"JasonEtco\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/10660468?v=4\\",\\"author_link\\":\\"https://github.com/JasonEtco\\",\\"pretext\\":\\"JasonEtco approved wilhelmklopp's pull request\\",\\"fallback\\":\\"[github-slack/public-test] JasonEtco approved wilhelmklopp's pull request\\",\\"title\\":\\"Review on #19 removing more words\\",\\"title_link\\":\\"https://github.com/github-slack/public-test/pull/19#pullrequestreview-97014958\\",\\"text\\":\\"rendered html\\",\\"mrkdwn_in\\":[\\"text\\"],\\"ts\\":1518730621}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel review event 2`] = `
Object {
  "attachments": "[{\\"color\\":\\"#36a64f\\",\\"footer\\":\\"<https://github.com/github-slack/public-test|github-slack/public-test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"author_name\\":\\"JasonEtco\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/10660468?v=4\\",\\"author_link\\":\\"https://github.com/JasonEtco\\",\\"pretext\\":\\"JasonEtco approved wilhelmklopp's pull request\\",\\"fallback\\":\\"[github-slack/public-test] JasonEtco approved wilhelmklopp's pull request\\",\\"title\\":\\"Review on #19 removing more words\\",\\"title_link\\":\\"https://github.com/github-slack/public-test/pull/19#pullrequestreview-97014958\\",\\"text\\":\\"updated html\\",\\"mrkdwn_in\\":[\\"text\\"],\\"ts\\":1518730621}]",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel review event 3`] = `
Array [
  "channel#9523#C001:review#97014958",
  "creator-access#1:107153132",
]
`;

exports[`Integration: notifications to a subscribed channel review event 4`] = `
Array [
  Array [
    "channel#9523#C001:review#97014958",
    Object {
      "channel": undefined,
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:107153132",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel status event with no matching PR does not update a message 1`] = `
Array [
  "creator-access#1:100427737",
]
`;

exports[`Integration: notifications to a subscribed channel status event with no matching PR does not update a message 2`] = `
Array [
  Array [
    "creator-access#1:100427737",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel update githubName in account subscription 1`] = `
Object {
  "attachments": "[{\\"fields\\":[{\\"title\\":\\"Comments\\",\\"value\\":3,\\"short\\":true},{\\"title\\":\\"Reviewers\\",\\"value\\":\\"thomasjo, fosslinux\\",\\"short\\":true}],\\"color\\":\\"#6f42c1\\",\\"footer\\":\\"<https://github.com/github-slack/app|github-slack/app>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"ts\\":1502411430,\\"mrkdwn_in\\":[\\"text\\"],\\"author_name\\":\\"e-beach\\",\\"author_link\\":\\"https://github.com/e-beach\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/13651458?v=4\\",\\"title\\":\\"#1535 Make fork command idempotent\\",\\"title_link\\":\\"https://github.com/github/hub/pull/1535\\",\\"fallback\\":\\"[github-slack/app] #1535 Make fork command idempotent\\",\\"text\\":\\"Fixes #1499.\\\\r\\\\n\\\\r\\\\nThis PR makes \`hub fork\` succeed, with no operation, if a remote pointing to the forked repository already exists.\\\\r\\\\n \\",\\"pretext\\":\\"Pull request merged by wilhelmklopp\\"}]",
  "channel": "C001",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel update githubName in account subscription 2`] = `
Array [
  "channel#9523#C001:pull#142600109",
  "creator-access#1:100427737",
  "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
]
`;

exports[`Integration: notifications to a subscribed channel update githubName in account subscription 3`] = `
Array [
  Array [
    "channel#9523#C001:pull#142600109",
    Object {
      "channel": undefined,
      "context": Object {
        "number": 31,
        "owner": "github-slack",
        "repo": "app",
      },
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100427737",
    true,
  ],
  Array [
    "repo#100427737:status#cb67adc76ba600bfb6dccd50c5c837f29d3912dc",
    142600109,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel with comments enabled (commit) 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/artnez/environment|artnez/environment>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"[artnez/environment] Comment on commit \\\\\\"update gohere\\\\\\"\\",\\"title\\":\\"Comment on commit \\\\\\"update gohere\\\\\\"\\",\\"title_link\\":\\"https://github.com/artnez/environment/commit/fa3f7c1a10ef7401496040b4508ede9b25b16695#commitcomment-30287269\\",\\"author_name\\":\\"artnez\\",\\"author_link\\":\\"https://github.com/artnez\\",\\"author_icon\\":\\"https://avatars1.githubusercontent.com/u/396654?v=4\\",\\"ts\\":1535170713,\\"mrkdwn_in\\":[\\"text\\"],\\"text\\":\\"Testing.\\"}]",
  "channel": "C002",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel with comments enabled (commit) 2`] = `
Array [
  "channel#9523#C002:comment#MDEzOkNvbW1pdENvbW1lbnQzMDI4NzI2OQ==",
  "creator-access#1:16064378",
]
`;

exports[`Integration: notifications to a subscribed channel with comments enabled (commit) 3`] = `
Array [
  Array [
    "channel#9523#C002:comment#MDEzOkNvbW1pdENvbW1lbnQzMDI4NzI2OQ==",
    Object {
      "channel": undefined,
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:16064378",
    true,
  ],
]
`;

exports[`Integration: notifications to a subscribed channel with comments enabled (issue) 1`] = `
Object {
  "attachments": "[{\\"color\\":\\"#24292f\\",\\"footer\\":\\"<https://github.com/github-slack/test|github-slack/test>\\",\\"footer_icon\\":\\"https://assets-cdn.github.com/favicon.ico\\",\\"fallback\\":\\"[github-slack/test] Comment on #23\\",\\"title\\":\\"Comment on #23 testing multi-tenet\\",\\"title_link\\":\\"https://github.com/github-slack/test/issues/23#issuecomment-364284529\\",\\"author_name\\":\\"bkeepers\\",\\"author_link\\":\\"https://github.com/bkeepers\\",\\"author_icon\\":\\"https://avatars0.githubusercontent.com/u/173?v=4\\",\\"ts\\":1518132652,\\"mrkdwn_in\\":[\\"text\\"],\\"text\\":\\"rendered html\\"}]",
  "channel": "C002",
  "token": "test",
}
`;

exports[`Integration: notifications to a subscribed channel with comments enabled (issue) 2`] = `
Array [
  "channel#9523#C002:comment#MDEyOklzc3VlQ29tbWVudDM2NDI4NDUyOQ==",
  "creator-access#1:100403908",
]
`;

exports[`Integration: notifications to a subscribed channel with comments enabled (issue) 3`] = `
Array [
  Array [
    "channel#9523#C002:comment#MDEyOklzc3VlQ29tbWVudDM2NDI4NDUyOQ==",
    Object {
      "channel": undefined,
      "ts": undefined,
    },
  ],
  Array [
    "creator-access#1:100403908",
    true,
  ],
]
`;
